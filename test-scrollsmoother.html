<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScrollSmoother Test - Simple Implementation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            /* Remove overflow: hidden to allow scrolling */
        }
        
        #smooth-wrapper {
            height: 100vh;
            overflow-y: auto;
            position: relative;
        }
        
        #smooth-content {
            height: auto;
            min-height: 100vh;
            overflow-y: visible;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Remove the problematic CSS overrides since we're using the correct structure now */
        
        .section {
            min-height: 100vh;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }
        
        .section h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0;
            transform: translateY(50px);
        }
        
        .section p {
            font-size: 1.2rem;
            max-width: 600px;
            opacity: 0;
            transform: translateY(30px);
        }
        
        .content-block {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            margin: 1rem 0;
            opacity: 0;
            transform: scale(0.9);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin: 2rem 0;
            opacity: 0;
            transform: translateY(40px);
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .floating-element {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 50%;
            position: absolute;
            opacity: 0;
            transform: scale(0);
        }
        
        .controls {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 1rem;
            border-radius: 10px;
            z-index: 1000;
        }
        
        .controls button {
            display: block;
            width: 100%;
            margin: 0.5rem 0;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .controls .enable { background: #4CAF50; color: white; }
        .controls .disable { background: #f44336; color: white; }
        .controls .test { background: #2196F3; color: white; }
        .controls .status { background: #FF9800; color: white; }
        .controls .emergency { background: #9C27B0; color: white; }
        .controls .nav { background: #607D8B; color: white; }
        
        .debug-info {
            position: fixed;
            left: 20px;
            top: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 1rem;
            border-radius: 10px;
            font-family: monospace;
            font-size: 0.9rem;
            z-index: 1000;
        }
        
        .scroll-progress {
            position: fixed;
            left: 20px;
            bottom: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 1rem;
            border-radius: 10px;
            z-index: 1000;
        }
        
        .progress-bar {
            width: 200px;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .progress-fill {
            height: 100%;
            background: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div id="smooth-wrapper">
        <div id="smooth-content">
            <section class="section" data-section="1">
                <h1>ðŸš€ Section 1</h1>
                <p>Welcome to the ScrollSmoother integration test! This page has multiple sections to properly test smooth scrolling functionality.</p>
                <div class="content-block">
                    <h3>What to Test:</h3>
                    <ul>
                        <li>Scroll down to see smooth, inertial scrolling</li>
                        <li>Use the controls on the right to enable/disable</li>
                        <li>Check performance in the console</li>
                        <li>Notice the smooth transitions between sections</li>
                    </ul>
                </div>
                <div class="floating-element" style="top: 20%; left: 20%;"></div>
                <div class="floating-element" style="bottom: 20%; right: 20%;"></div>
            </section>
            
            <section class="section" data-section="2">
                <h1>ðŸ“Š Section 2</h1>
                <p>This section demonstrates how ScrollSmoother works with different content types and animations.</p>
                <div class="stats-grid">
                    <div class="stat-item">
                        <h3>100%</h3>
                        <p>Smooth Scrolling</p>
                    </div>
                    <div class="stat-item">
                        <h3>60fps</h3>
                        <p>Performance</p>
                    </div>
                    <div class="stat-item">
                        <h3>Zero</h3>
                        <p>Interference</p>
                    </div>
                </div>
            </section>
            
            <section class="section" data-section="3">
                <h1>ðŸŽ¨ Section 3</h1>
                <p>ScrollSmoother enhances the user experience without breaking existing functionality.</p>
                <div class="content-block">
                    <h3>Key Benefits:</h3>
                    <ul>
                        <li>Natural inertial scrolling</li>
                        <li>Touch-friendly on mobile</li>
                        <li>Performance optimized</li>
                        <li>Easy to implement</li>
                    </ul>
                </div>
            </section>
            
            <section class="section" data-section="4">
                <h1>âš¡ Section 4</h1>
                <p>Performance is crucial - ScrollSmoother is designed to be lightweight and efficient.</p>
                <div class="stats-grid">
                    <div class="stat-item">
                        <h3>&lt; 5KB</h3>
                        <p>Gzipped</p>
                    </div>
                    <div class="stat-item">
                        <h3>60fps</h3>
                        <p>Target</p>
                    </div>
                    <div class="stat-item">
                        <h3>Native</h3>
                        <p>Feel</p>
                    </div>
                </div>
            </section>
            
            <section class="section" data-section="5">
                <h1>ðŸ”§ Section 5</h1>
                <p>This is the section you can jump to using the navigation controls.</p>
                <div class="content-block">
                    <h3>Navigation Test:</h3>
                    <p>Use the "Jump to Section 5" button to test programmatic scrolling with ScrollSmoother.</p>
                </div>
            </section>
            
            <section class="section" data-section="6">
                <h1>ðŸŽ¯ Section 6</h1>
                <p>Final section - you've successfully tested ScrollSmoother integration!</p>
                <div class="content-block">
                    <h3>Integration Complete:</h3>
                    <p>ScrollSmoother is now working with your existing ScrollTrigger animations.</p>
                </div>
            </section>
        </div>
    </div>
    
    <div class="controls">
        <h3>ScrollSmoother Controls</h3>
        <button class="enable" onclick="enableSmoothScrolling()">âœ” Enable Smooth Scrolling</button>
        <button class="disable" onclick="disableSmoothScrolling()">âœ— Disable Smooth Scrolling</button>
        <button class="test" onclick="testPerformance()">âœ“ Test Performance</button>
        <button class="status" onclick="getStatus()">ðŸ“Š Get Status</button>
        <button class="emergency" onclick="emergencyDisable()">âš  Emergency Disable</button>
        <button class="nav" onclick="scrollToSection(2)">â†‘ Jump to Section 2</button>
        <button class="nav" onclick="scrollToSection(5)">â†“ Jump to Section 5</button>
        <div id="status-display">Ready - Click 'Enable Smooth Scrolling' to test</div>
    </div>
    
    <div class="debug-info">
        <div><strong>Debug Info:</strong></div>
        <div id="total-height">Total Height: --</div>
        <div id="scroll-position-debug">Scroll: --</div>
        <div id="viewport-height">Viewport: --</div>
    </div>
    
    <div class="scroll-progress">
        <div><strong>Scroll Progress</strong></div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div id="progress-text">0%</div>
    </div>
    
    <!-- GSAP CDN -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13/dist/ScrollSmoother.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13/dist/ScrollTrigger.min.js"></script>
    
    <script>
        // Register GSAP plugins
        gsap.registerPlugin(ScrollSmoother, ScrollTrigger);
        
        // Global variables
        let smoother;
        let isEnabled = false;
        
        // Initialize ScrollSmoother
        function initializeScrollSmoother() {
            try {
                // Create ScrollSmoother instance with correct structure
                smoother = ScrollSmoother.create({
                    wrapper: "#smooth-wrapper", // Use the wrapper div
                    content: "#smooth-content", // Use the content div
                    smooth: 1.2,
                    effects: true,
                    normalizeScroll: false,
                    ignoreMobileResize: true,
                    smoothTouch: 0.1,
                    ease: "power1.out"
                });
                
                console.log("ScrollSmoother initialized successfully");
                updateStatus("ScrollSmoother initialized - ready to enable");
                
                // Set up scroll event listener for progress tracking
                smoother.effects(".section", { speed: 0.5 });
                
            } catch (error) {
                console.error("Error initializing ScrollSmoother:", error);
                updateStatus("Error initializing ScrollSmoother");
            }
        }
        
        // Enable smooth scrolling
        function enableSmoothScrolling() {
            if (smoother) {
                smoother.paused(false);
                isEnabled = true;
                updateStatus("Smooth scrolling ENABLED");
                console.log("ScrollSmoother enabled");
            } else {
                updateStatus("ScrollSmoother not initialized");
            }
        }
        
        // Disable smooth scrolling
        function disableSmoothScrolling() {
            if (smoother) {
                smoother.paused(true);
                isEnabled = false;
                updateStatus("Smooth scrolling DISABLED");
                console.log("ScrollSmoother disabled");
            }
        }
        
        // Test performance
        function testPerformance() {
            if (smoother) {
                const startTime = performance.now();
                smoother.scrollTo(1, { duration: 1 });
                setTimeout(() => {
                    const endTime = performance.now();
                    const duration = endTime - startTime;
                    updateStatus(`Performance test: ${duration.toFixed(2)}ms`);
                    console.log(`ScrollSmoother performance test: ${duration.toFixed(2)}ms`);
                }, 1100);
            } else {
                updateStatus("ScrollSmoother not initialized");
            }
        }
        
        // Get current status
        function getStatus() {
            if (smoother) {
                const progress = smoother.progress;
                const scrollTop = smoother.scrollTop();
                updateStatus(`Progress: ${(progress * 100).toFixed(1)}%, Scroll: ${Math.round(scrollTop)}px`);
                console.log("ScrollSmoother status:", { progress, scrollTop });
            } else {
                updateStatus("ScrollSmoother not initialized");
            }
        }
        
        // Emergency disable
        function emergencyDisable() {
            if (smoother) {
                smoother.paused(true);
                isEnabled = false;
                updateStatus("EMERGENCY DISABLED");
                console.warn("ScrollSmoother emergency disabled");
            }
        }
        
        // Scroll to specific section
        function scrollToSection(sectionNumber) {
            if (smoother) {
                const section = document.querySelector(`[data-section="${sectionNumber}"]`);
                if (section) {
                    smoother.scrollTo(section, { duration: 1, offsetTop: 0 });
                    updateStatus(`Scrolled to Section ${sectionNumber}`);
                }
            } else {
                updateStatus("ScrollSmoother not initialized");
            }
        }
        
        // Update status display
        function updateStatus(message) {
            const statusDisplay = document.getElementById('status-display');
            if (statusDisplay) {
                statusDisplay.textContent = message;
            }
        }
        
        // Update debug info
        function updateDebugInfo() {
            const totalHeight = document.getElementById('smooth-content').scrollHeight;
            const scrollTop = smoother ? smoother.scrollTop() : window.pageYOffset;
            const viewportHeight = window.innerHeight;
            
            document.getElementById('total-height').textContent = `Total Height: ${totalHeight}px`;
            document.getElementById('scroll-position-debug').textContent = `Scroll: ${Math.round(scrollTop)}px`;
            document.getElementById('viewport-height').textContent = `Viewport: ${viewportHeight}px`;
            
            // Update progress bar
            const progress = smoother ? smoother.progress : (scrollTop / (totalHeight - viewportHeight));
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            if (progressFill && progressText) {
                progressFill.style.width = `${progress * 100}%`;
                progressText.textContent = `${Math.round(progress * 100)}%`;
            }
        }
        
        // Add text animations
        function addTextAnimations() {
            gsap.utils.toArray('.section h1').forEach(heading => {
                gsap.fromTo(heading, 
                    { opacity: 0, y: 50 },
                    { 
                        opacity: 1, 
                        y: 0, 
                        duration: 1,
                        scrollTrigger: {
                            trigger: heading,
                            start: "top 80%",
                            end: "bottom 20%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });
            
            gsap.utils.toArray('.section p').forEach(paragraph => {
                gsap.fromTo(paragraph, 
                    { opacity: 0, y: 30 },
                    { 
                        opacity: 1, 
                        y: 0, 
                        duration: 0.8,
                        scrollTrigger: {
                            trigger: paragraph,
                            start: "top 80%",
                            end: "bottom 20%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });
            
            gsap.utils.toArray('.content-block').forEach(block => {
                gsap.fromTo(block, 
                    { opacity: 0, scale: 0.9 },
                    { 
                        opacity: 1, 
                        scale: 1, 
                        duration: 0.8,
                        scrollTrigger: {
                            trigger: block,
                            start: "top 80%",
                            end: "bottom 20%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });
            
            gsap.utils.toArray('.stats-grid').forEach(grid => {
                gsap.fromTo(grid, 
                    { opacity: 0, y: 40 },
                    { 
                        opacity: 1, 
                        y: 0, 
                        duration: 0.8,
                        scrollTrigger: {
                            trigger: grid,
                            start: "top 80%",
                            end: "bottom 20%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });
            
            gsap.utils.toArray('.floating-element').forEach(element => {
                gsap.fromTo(element, 
                    { opacity: 0, scale: 0 },
                    { 
                        opacity: 1, 
                        scale: 1, 
                        duration: 1,
                        scrollTrigger: {
                            trigger: element,
                            start: "top 80%",
                            end: "bottom 20%",
                            toggleActions: "play none none reverse"
                        }
                    }
                );
            });
        }
        
        // Initialize everything when page loads
        window.addEventListener('load', () => {
            console.log("Page loaded, initializing ScrollSmoother...");
            initializeScrollSmoother();
            addTextAnimations();
            
            // Set up scroll event listener for debug info
            if (smoother) {
                smoother.effects(".section", { speed: 0.5 });
                // Use the correct event handling for ScrollSmoother
                document.addEventListener('scroll', updateDebugInfo);
            }
            
            // Initial debug info update
            updateDebugInfo();
            
            console.log("Initialization complete");
        });
        
        // Keyboard shortcuts for testing
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 's':
                        e.preventDefault();
                        if (isEnabled) {
                            disableSmoothScrolling();
                        } else {
                            enableSmoothScrolling();
                        }
                        break;
                    case 't':
                        e.preventDefault();
                        testPerformance();
                        break;
                    case 'e':
                        e.preventDefault();
                        emergencyDisable();
                        break;
                }
            }
        });
    </script>
</body>
</html>
